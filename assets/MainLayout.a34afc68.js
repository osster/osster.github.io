import{c as X,h as te,a as ft,g as vt,u as gt,b as mt,d as ht,Q as ue,e as Ke}from"./use-router-link.90473de3.js";import{i as Ze,k as ye,l as We,p as Ye,c as w,h as g,m as pt,g as J,w as B,o as ne,n as ae,q as Xe,t as pe,r as $,u as $e,v as Y,x as de,a as bt,y as Je,z as Ge,A as et,B as yt,C as tt,D as wt,E as xt,G as se,H as Ct,I as kt,J as St,K as Ae,L as qt,d as Mt,_ as nt,M as ee,N as Te,O as ie,P as j,f as K,Q as le,R as we,F as _t,S as Rt,U as $t,V as At,W as Tt,X as Ve}from"./index.24346c7f.js";import{c as Ee,g as Vt,h as Fe,u as Et,a as Ft,Q as xe}from"./QBtn.647afc3a.js";import{u as at,a as lt,Q as Bt}from"./QSeparator.f70b181c.js";import{chatApi as Be}from"./axios.b866c4db.js";var zt=X({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:n}}=J(),a=Ze(We,ye);if(a===ye)return console.error("QPageContainer needs to be child of QLayout"),ye;Ye(pt,!0);const l=w(()=>{const s={};return a.header.space===!0&&(s.paddingTop=`${a.header.size}px`),a.right.space===!0&&(s[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${a.right.size}px`),a.footer.space===!0&&(s.paddingBottom=`${a.footer.size}px`),a.left.space===!0&&(s[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${a.left.size}px`),s});return()=>g("div",{class:"q-page-container",style:l.value},te(t.default))}});const Lt=[null,document,document.body,document.scrollingElement,document.documentElement];function ot(e,t){let n=Vt(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return Lt.includes(n)?window:n}function fe(e){return(e===window?document.body:e).scrollHeight}function ce(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function Pt(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function it(e,t,n=0){const a=arguments[3]===void 0?performance.now():arguments[3],l=ce(e);if(n<=0){l!==t&&Me(e,t);return}requestAnimationFrame(s=>{const d=s-a,h=l+(t-l)/Math.max(d,n)*d;Me(e,h),h!==t&&it(e,t,n-d,s)})}function Me(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function Ce(e,t,n){if(n){it(e,t,n);return}Me(e,t)}let ve;function ke(){if(ve!==void 0)return ve;const e=document.createElement("p"),t=document.createElement("div");Ee(e,{width:"100%",height:"200px"}),Ee(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let a=e.offsetWidth;return n===a&&(a=t.clientWidth),t.remove(),ve=n-a,ve}const{passive:ze}=pe,Ot=["both","horizontal","vertical"];var Ht=X({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Ot.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:t}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let a=null,l,s;B(()=>e.scrollTarget,()=>{v(),h()});function d(){a!==null&&a();const m=Math.max(0,ce(l)),V=Pt(l),k={top:m-n.position.top,left:V-n.position.left};if(e.axis==="vertical"&&k.top===0||e.axis==="horizontal"&&k.left===0)return;const A=Math.abs(k.top)>=Math.abs(k.left)?k.top<0?"up":"down":k.left<0?"left":"right";n.position={top:m,left:V},n.directionChanged=n.direction!==A,n.delta=k,n.directionChanged===!0&&(n.direction=A,n.inflectionPoint=n.position),t("scroll",{...n})}function h(){l=ot(s,e.scrollTarget),l.addEventListener("scroll",f,ze),f(!0)}function v(){l!==void 0&&(l.removeEventListener("scroll",f,ze),l=void 0)}function f(m){if(m===!0||e.debounce===0||e.debounce==="0")d();else if(a===null){const[V,k]=e.debounce?[setTimeout(d,e.debounce),clearTimeout]:[requestAnimationFrame(d),cancelAnimationFrame];a=()=>{k(V),a=null}}}const{proxy:p}=J();return B(()=>p.$q.lang.rtl,d),ne(()=>{s=p.$el.parentNode,h()}),ae(()=>{a!==null&&a(),v()}),Object.assign(p,{trigger:f,getPosition:()=>n}),Xe}});function Dt(){const e=$(!$e.value);return e.value===!1&&ne(()=>{e.value=!0}),e}const rt=typeof ResizeObserver!="undefined",Le=rt===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var Pe=X({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let n=null,a,l={width:-1,height:-1};function s(v){v===!0||e.debounce===0||e.debounce==="0"?d():n===null&&(n=setTimeout(d,e.debounce))}function d(){if(n!==null&&(clearTimeout(n),n=null),a){const{offsetWidth:v,offsetHeight:f}=a;(v!==l.width||f!==l.height)&&(l={width:v,height:f},t("resize",l))}}const{proxy:h}=J();if(h.trigger=s,rt===!0){let v;const f=p=>{a=h.$el.parentNode,a?(v=new ResizeObserver(s),v.observe(a),d()):p!==!0&&Y(()=>{f(!0)})};return ne(()=>{f()}),ae(()=>{n!==null&&clearTimeout(n),v!==void 0&&(v.disconnect!==void 0?v.disconnect():a&&v.unobserve(a))}),Xe}else{let p=function(){n!==null&&(clearTimeout(n),n=null),f!==void 0&&(f.removeEventListener!==void 0&&f.removeEventListener("resize",s,pe.passive),f=void 0)},m=function(){p(),a&&a.contentDocument&&(f=a.contentDocument.defaultView,f.addEventListener("resize",s,pe.passive),d())};const v=Dt();let f;return ne(()=>{Y(()=>{a=h.$el,a&&m()})}),ae(p),()=>{if(v.value===!0)return g("object",{style:Le.style,tabindex:-1,type:"text/html",data:Le.url,"aria-hidden":"true",onLoad:m})}}}}),Nt=X({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=J(),l=$(null),s=$(a.screen.height),d=$(e.container===!0?0:a.screen.width),h=$({position:0,direction:"down",inflectionPoint:0}),v=$(0),f=$($e.value===!0?0:ke()),p=w(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=w(()=>e.container===!1?{minHeight:a.screen.height+"px"}:null),V=w(()=>f.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${f.value}px`}:null),k=w(()=>f.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${f.value}px`,width:`calc(100% + ${f.value}px)`}:null);function A(x){if(e.container===!0||document.qScrollPrevented!==!0){const C={position:x.position.top,direction:x.direction,directionChanged:x.directionChanged,inflectionPoint:x.inflectionPoint.top,delta:x.delta.top};h.value=C,e.onScroll!==void 0&&n("scroll",C)}}function O(x){const{height:C,width:M}=x;let b=!1;s.value!==C&&(b=!0,s.value=C,e.onScrollHeight!==void 0&&n("scrollHeight",C),U()),d.value!==M&&(b=!0,d.value=M),b===!0&&e.onResize!==void 0&&n("resize",x)}function z({height:x}){v.value!==x&&(v.value=x,U())}function U(){if(e.container===!0){const x=s.value>v.value?ke():0;f.value!==x&&(f.value=x)}}let E=null;const N={instances:{},view:w(()=>e.view),isContainer:w(()=>e.container),rootRef:l,height:s,containerHeight:v,scrollbarWidth:f,totalWidth:w(()=>d.value+f.value),rows:w(()=>{const x=e.view.toLowerCase().split(" ");return{top:x[0].split(""),middle:x[1].split(""),bottom:x[2].split("")}}),header:de({size:0,offset:0,space:!1}),right:de({size:300,offset:0,space:!1}),footer:de({size:0,offset:0,space:!1}),left:de({size:300,offset:0,space:!1}),scroll:h,animate(){E!==null?clearTimeout(E):document.body.classList.add("q-body--layout-animate"),E=setTimeout(()=>{E=null,document.body.classList.remove("q-body--layout-animate")},155)},update(x,C,M){N[x][C]=M}};if(Ye(We,N),ke()>0){let M=function(){x=null,C.classList.remove("hide-scrollbar")},b=function(){if(x===null){if(C.scrollHeight>a.screen.height)return;C.classList.add("hide-scrollbar")}else clearTimeout(x);x=setTimeout(M,300)},L=function(o){x!==null&&o==="remove"&&(clearTimeout(x),M()),window[`${o}EventListener`]("resize",b)},x=null;const C=document.body;B(()=>e.container!==!0?"add":"remove",L),e.container!==!0&&L("add"),bt(()=>{L("remove")})}return()=>{const x=ft(t.default,[g(Ht,{onScroll:A}),g(Pe,{onResize:O})]),C=g("div",{class:p.value,style:m.value,ref:e.container===!0?void 0:l,tabindex:-1},x);return e.container===!0?g("div",{class:"q-layout-container overflow-hidden",ref:l},[g(Pe,{onResize:z}),g("div",{class:"absolute-full",style:V.value},[g("div",{class:"scroll",style:k.value},[C])])]):C}}}),It=X({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=w(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>g(e.tag,{class:n.value},te(t.default))}}),Qt=X({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const n=w(()=>e.sent===!0?"sent":"received"),a=w(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),l=w(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),s=w(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),d=w(()=>e.size!==void 0?`col-${e.size}`:""),h=w(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function v(p){return t.stamp!==void 0?[p,g("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[p,g("div",{class:"q-message-stamp",[h.value.stamp]:e.stamp})]:[p]}function f(p,m){const V=m===!0?p.length>1?k=>k:k=>g("div",[k]):k=>g("div",{[h.value.msg]:k});return p.map((k,A)=>g("div",{key:A,class:l.value},[g("div",{class:a.value},v(V(k)))]))}return()=>{const p=[];t.avatar!==void 0?p.push(t.avatar()):e.avatar!==void 0&&p.push(g("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const m=[];t.name!==void 0?m.push(g("div",{class:`q-message-name q-message-name--${n.value}`},t.name())):e.name!==void 0&&m.push(g("div",{class:`q-message-name q-message-name--${n.value}`,[h.value.name]:e.name})),t.default!==void 0?m.push(f(vt(t.default()),!0)):e.text!==void 0&&m.push(f(e.text)),p.push(g("div",{class:d.value},m));const V=[];return t.label!==void 0?V.push(g("div",{class:"q-message-label"},t.label())):e.label!==void 0&&V.push(g("div",{class:"q-message-label",[h.value.label]:e.label})),V.push(g("div",{class:s.value},p)),g("div",{class:`q-message q-message-${n.value}`},V)}}});const Ut=[g("circle",{cx:"15",cy:"15",r:"15"},[g("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),g("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),g("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[g("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),g("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),g("circle",{cx:"105",cy:"15",r:"15"},[g("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),g("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var jt=X({name:"QSpinnerDots",props:gt,setup(e){const{cSize:t,classes:n}=mt(e);return()=>g("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ut)}});const{passive:oe}=pe;var Kt=X({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:n}){const a=$(!1),l=$(!0),s=$(null),d=$(null);let h=e.initialIndex||0,v,f;const p=w(()=>"q-infinite-scroll__loading"+(a.value===!0?"":" invisible"));function m(){if(e.disable===!0||a.value===!0||l.value===!1)return;const b=fe(v),L=ce(v),o=Fe(v);e.reverse===!1?Math.round(L+o+e.offset)>=Math.round(b)&&V():Math.round(L)<=e.offset&&V()}function V(){if(e.disable===!0||a.value===!0||l.value===!1)return;h++,a.value=!0;const b=fe(v);n("load",h,L=>{l.value===!0&&(a.value=!1,Y(()=>{if(e.reverse===!0){const o=fe(v),u=ce(v),y=o-b;Ce(v,u+y)}L===!0?O():s.value&&s.value.closest("body")&&f()}))})}function k(){h=0}function A(){l.value===!1&&(l.value=!0,v.addEventListener("scroll",f,oe)),m()}function O(){l.value===!0&&(l.value=!1,a.value=!1,v.removeEventListener("scroll",f,oe),f!==void 0&&f.cancel!==void 0&&f.cancel())}function z(){if(v&&l.value===!0&&v.removeEventListener("scroll",f,oe),v=ot(s.value,e.scrollTarget),l.value===!0){if(v.addEventListener("scroll",f,oe),e.reverse===!0){const b=fe(v),L=Fe(v);Ce(v,b-L)}m()}}function U(b){h=b}function E(b){b=parseInt(b,10);const L=f;f=b<=0?m:et(m,isNaN(b)===!0?100:b),v&&l.value===!0&&(L!==void 0&&v.removeEventListener("scroll",L,oe),v.addEventListener("scroll",f,oe))}function N(b){if(x.value===!0){if(d.value===null){b!==!0&&Y(()=>{N(!0)});return}const L=`${a.value===!0?"un":""}pauseAnimations`;Array.from(d.value.getElementsByTagName("svg")).forEach(o=>{o[L]()})}}const x=w(()=>e.disable!==!0&&l.value===!0);B([a,x],()=>{N()}),B(()=>e.disable,b=>{b===!0?O():A()}),B(()=>e.reverse,()=>{a.value===!1&&l.value===!0&&m()}),B(()=>e.scrollTarget,z),B(()=>e.debounce,E);let C=!1;Je(()=>{C!==!1&&v&&Ce(v,C)}),Ge(()=>{C=v?ce(v):!1}),ae(()=>{l.value===!0&&v.removeEventListener("scroll",f,oe)}),ne(()=>{E(e.debounce),z(),a.value===!1&&N()});const M=J();return Object.assign(M.proxy,{poll:()=>{f!==void 0&&f()},trigger:V,stop:O,reset:k,resume:A,setIndex:U}),()=>{const b=ht(t.default,[]);return x.value===!0&&b[e.reverse===!1?"push":"unshift"](g("div",{ref:d,class:p.value},te(t.loading))),g("div",{class:"q-infinite-scroll",ref:s},b)}}});function Zt({validate:e,resetValidation:t,requiresQForm:n}){const a=Ze(yt,!1);if(a!==!1){const{props:l,proxy:s}=J();Object.assign(s,{validate:e,resetValidation:t}),B(()=>l.disable,d=>{d===!0?(typeof t=="function"&&t(),a.unbindComponent(s)):a.bindComponent(s)}),ne(()=>{l.disable!==!0&&a.bindComponent(s)}),ae(()=>{l.disable!==!0&&a.unbindComponent(s)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Oe=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,He=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,De=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,ge=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,me=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Se={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Oe.test(e),hexaColor:e=>He.test(e),hexOrHexaColor:e=>De.test(e),rgbColor:e=>ge.test(e),rgbaColor:e=>me.test(e),rgbOrRgbaColor:e=>ge.test(e)||me.test(e),hexOrRgbColor:e=>Oe.test(e)||ge.test(e),hexaOrRgbaColor:e=>He.test(e)||me.test(e),anyColor:e=>De.test(e)||ge.test(e)||me.test(e)},Wt=[!0,!1,"ondemand"],Yt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>Wt.includes(e)}};function Xt(e,t){const{props:n,proxy:a}=J(),l=$(!1),s=$(null),d=$(null);Zt({validate:A,resetValidation:k});let h=0,v;const f=w(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),p=w(()=>n.disable!==!0&&f.value===!0&&t.value===!1),m=w(()=>n.error===!0||l.value===!0),V=w(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:s.value);B(()=>n.modelValue,()=>{d.value=!0,p.value===!0&&n.lazyRules===!1&&O()}),B(()=>n.reactiveRules,z=>{z===!0?v===void 0&&(v=B(()=>n.rules,()=>{p.value===!0&&d.value===!0&&n.lazyRules!=="ondemand"&&O()},{immediate:!0})):v!==void 0&&(v(),v=void 0)},{immediate:!0}),B(()=>n.lazyRules,z=>{z===!1&&p.value===!0&&d.value===!0&&O()}),B(e,z=>{z===!0?d.value===null&&(d.value=n.lazyRules===!0):p.value===!0&&(n.lazyRules===!1||n.lazyRules===!0&&d.value===!0)&&O()});function k(){h++,t.value=!1,d.value=null,l.value=!1,s.value=null,O.cancel()}function A(z=n.modelValue){if(n.disable===!0||f.value===!1)return!0;const U=++h,E=t.value!==!0?()=>{d.value=!0}:()=>{},N=(C,M)=>{C===!0&&E(),l.value=C,s.value=M||null,t.value=!1},x=[];for(let C=0;C<n.rules.length;C++){const M=n.rules[C];let b;if(typeof M=="function"?b=M(z,Se):typeof M=="string"&&Se[M]!==void 0&&(b=Se[M](z)),b===!1||typeof b=="string")return N(!0,b),!1;b!==!0&&b!==void 0&&x.push(b)}return x.length===0?(N(!1),!0):(t.value=!0,Promise.all(x).then(C=>{if(C===void 0||Array.isArray(C)===!1||C.length===0)return U===h&&N(!1),!0;const M=C.find(b=>b===!1||typeof b=="string");return U===h&&N(M!==void 0,M),M===void 0},C=>(U===h&&(console.error(C),N(!0)),!1)))}const O=et(A,0);return ae(()=>{v!==void 0&&v(),O.cancel()}),Object.assign(a,{resetValidation:k,validate:A}),tt(a,"hasError",()=>m.value),{isDirtyModel:d,hasRules:f,hasError:m,errorMessage:V,validate:A,resetValidation:k}}const Ne=/^on[A-Z]/;function Jt(e,t){const n={listeners:$({}),attributes:$({})};function a(){const l={},s={};for(const d in e)d!=="class"&&d!=="style"&&Ne.test(d)===!1&&(l[d]=e[d]);for(const d in t.props)Ne.test(d)===!0&&(s[d]=t.props[d]);n.attributes.value=l,n.listeners.value=s}return wt(a),a(),n}let qe,he=0;const I=new Array(256);for(let e=0;e<256;e++)I[e]=(e+256).toString(16).substring(1);const Gt=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let a=t;a>0;a--)n.push(Math.floor(Math.random()*256));return n}})(),Ie=4096;function st(){(qe===void 0||he+16>Ie)&&(he=0,qe=Gt(Ie));const e=Array.prototype.slice.call(qe,he,he+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,I[e[0]]+I[e[1]]+I[e[2]]+I[e[3]]+"-"+I[e[4]]+I[e[5]]+"-"+I[e[6]]+I[e[7]]+"-"+I[e[8]]+I[e[9]]+"-"+I[e[10]]+I[e[11]]+I[e[12]]+I[e[13]]+I[e[14]]+I[e[15]]}let _e=[],en=[];function ut(e){en.length===0?e():_e.push(e)}function tn(e){_e=_e.filter(t=>t!==e)}function ct(e,t){return e===void 0?t===!0?`f_${st()}`:void 0:e}function Re(e){return e!=null&&(""+e).length!==0}const nn={...at,...Yt,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},an=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function ln({requiredForAttr:e=!0,tagProp:t}={}){const{props:n,attrs:a,proxy:l,vnode:s}=J(),d=lt(n,l.$q);return{requiredForAttr:e,tag:t===!0?w(()=>n.tag):{value:"label"},isDark:d,editable:w(()=>n.disable!==!0&&n.readonly!==!0),innerLoading:$(!1),focused:$(!1),hasPopupOpen:!1,splitAttrs:Jt(a,s),targetUid:$(ct(n.for,e)),rootRef:$(null),targetRef:$(null),controlRef:$(null)}}function on(e){const{props:t,emit:n,slots:a,attrs:l,proxy:s}=J(),{$q:d}=s;let h=null;e.hasValue===void 0&&(e.hasValue=w(()=>Re(t.modelValue))),e.emitValue===void 0&&(e.emitValue=r=>{n("update:modelValue",r)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:o,onFocusout:u}),Object.assign(e,{clearValue:y,onControlFocusin:o,onControlFocusout:u,focus:b}),e.computedCounter===void 0&&(e.computedCounter=w(()=>{if(t.counter!==!1){const r=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,R=t.maxlength!==void 0?t.maxlength:t.maxValues;return r+(R!==void 0?" / "+R:"")}}));const{isDirtyModel:v,hasRules:f,hasError:p,errorMessage:m,resetValidation:V}=Xt(e.focused,e.innerLoading),k=e.floatingLabel!==void 0?w(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):w(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),A=w(()=>t.bottomSlots===!0||t.hint!==void 0||f.value===!0||t.counter===!0||t.error!==null),O=w(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),z=w(()=>`q-field row no-wrap items-start q-field--${O.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(k.value===!0?" q-field--float":"")+(E.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(p.value===!0?" q-field--error":"")+(p.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&A.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),U=w(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(p.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),E=w(()=>t.labelSlot===!0||t.label!==void 0),N=w(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&p.value!==!0?` text-${t.labelColor}`:"")),x=w(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:k.value,modelValue:t.modelValue,emitValue:e.emitValue})),C=w(()=>{const r={for:e.targetUid.value};return t.disable===!0&&(r["aria-disabled"]="true"),r});B(()=>t.for,r=>{e.targetUid.value=ct(r,e.requiredForAttr)});function M(){const r=document.activeElement;let R=e.targetRef!==void 0&&e.targetRef.value;R&&(r===null||r.id!==e.targetUid.value)&&(R.hasAttribute("tabindex")===!0||(R=R.querySelector("[tabindex]")),R&&R!==r&&R.focus({preventScroll:!0}))}function b(){ut(M)}function L(){tn(M);const r=document.activeElement;r!==null&&e.rootRef.value.contains(r)&&r.blur()}function o(r){h!==null&&(clearTimeout(h),h=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",r))}function u(r,R){h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",r)),R!==void 0&&R())})}function y(r){xt(r),d.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),n("clear",t.modelValue),Y(()=>{V(),d.platform.is.mobile!==!0&&(v.value=!1)})}function c(){const r=[];return a.prepend!==void 0&&r.push(g("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:se},a.prepend())),r.push(g("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},q())),p.value===!0&&t.noErrorIcon===!1&&r.push(F("error",[g(ue,{name:d.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?r.push(F("inner-loading-append",a.loading!==void 0?a.loading():[g(Ke,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&r.push(F("inner-clearable-append",[g(ue,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||d.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:y})])),a.append!==void 0&&r.push(g("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:se},a.append())),e.getInnerAppend!==void 0&&r.push(F("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&r.push(e.getControlChild()),r}function q(){const r=[];return t.prefix!==void 0&&t.prefix!==null&&r.push(g("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&r.push(e.getShadowControl()),e.getControl!==void 0?r.push(e.getControl()):a.rawControl!==void 0?r.push(a.rawControl()):a.control!==void 0&&r.push(g("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},a.control(x.value))),E.value===!0&&r.push(g("div",{class:N.value},te(a.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&r.push(g("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),r.concat(te(a.default))}function S(){let r,R;p.value===!0?m.value!==null?(r=[g("div",{role:"alert"},m.value)],R=`q--slot-error-${m.value}`):(r=te(a.error),R="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(r=[g("div",t.hint)],R=`q--slot-hint-${t.hint}`):(r=te(a.hint),R="q--slot-hint"));const Z=t.counter===!0||a.counter!==void 0;if(t.hideBottomSpace===!0&&Z===!1&&r===void 0)return;const T=g("div",{key:R,class:"q-field__messages col"},r);return g("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:se},[t.hideBottomSpace===!0?T:g(Ct,{name:"q-transition--field-message"},()=>T),Z===!0?g("div",{class:"q-field__counter"},a.counter!==void 0?a.counter():e.computedCounter.value):null])}function F(r,R){return R===null?null:g("div",{key:r,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},R)}let _=!1;return Ge(()=>{_=!0}),Je(()=>{_===!0&&t.autofocus===!0&&s.focus()}),ne(()=>{$e.value===!0&&e.requiredForAttr===!0&&t.for===void 0&&(e.targetUid.value=`f_${st()}`),t.autofocus===!0&&s.focus()}),ae(()=>{h!==null&&clearTimeout(h)}),Object.assign(s,{focus:b,blur:L}),function(){const R=e.getControl===void 0&&a.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...C.value}:C.value;return g(e.tag.value,{ref:e.rootRef,class:[z.value,l.class],style:l.style,...R},[a.before!==void 0?g("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:se},a.before()):null,g("div",{class:"q-field__inner relative-position col self-stretch"},[g("div",{ref:e.controlRef,class:U.value,tabindex:-1,...e.controlEvents},c()),A.value===!0?S():null]),a.after!==void 0?g("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:se},a.after()):null])}}const Qe={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},be={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},dt=Object.keys(be);dt.forEach(e=>{be[e].regex=new RegExp(be[e].pattern)});const rn=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+dt.join("")+"])|(.)","g"),Ue=/[.*+?^${}()|[\]\\]/g,H=String.fromCharCode(1),sn={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function un(e,t,n,a){let l,s,d,h,v,f;const p=$(null),m=$(k());function V(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}B(()=>e.type+e.autogrow,O),B(()=>e.mask,o=>{if(o!==void 0)z(m.value,!0);else{const u=b(m.value);O(),e.modelValue!==u&&t("update:modelValue",u)}}),B(()=>e.fillMask+e.reverseFillMask,()=>{p.value===!0&&z(m.value,!0)}),B(()=>e.unmaskedValue,()=>{p.value===!0&&z(m.value)});function k(){if(O(),p.value===!0){const o=C(b(e.modelValue));return e.fillMask!==!1?L(o):o}return e.modelValue}function A(o){if(o<l.length)return l.slice(-o);let u="",y=l;const c=y.indexOf(H);if(c>-1){for(let q=o-y.length;q>0;q--)u+=H;y=y.slice(0,c)+u+y.slice(c)}return y}function O(){if(p.value=e.mask!==void 0&&e.mask.length!==0&&V(),p.value===!1){h=void 0,l="",s="";return}const o=Qe[e.mask]===void 0?e.mask:Qe[e.mask],u=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",y=u.replace(Ue,"\\$&"),c=[],q=[],S=[];let F=e.reverseFillMask===!0,_="",r="";o.replace(rn,(D,i,P,G,W)=>{if(G!==void 0){const Q=be[G];S.push(Q),r=Q.negate,F===!0&&(q.push("(?:"+r+"+)?("+Q.pattern+"+)?(?:"+r+"+)?("+Q.pattern+"+)?"),F=!1),q.push("(?:"+r+"+)?("+Q.pattern+")?")}else if(P!==void 0)_="\\"+(P==="\\"?"":P),S.push(P),c.push("([^"+_+"]+)?"+_+"?");else{const Q=i!==void 0?i:W;_=Q==="\\"?"\\\\\\\\":Q.replace(Ue,"\\\\$&"),S.push(Q),c.push("([^"+_+"]+)?"+_+"?")}});const R=new RegExp("^"+c.join("")+"("+(_===""?".":"[^"+_+"]")+"+)?"+(_===""?"":"["+_+"]*")+"$"),Z=q.length-1,T=q.map((D,i)=>i===0&&e.reverseFillMask===!0?new RegExp("^"+y+"*"+D):i===Z?new RegExp("^"+D+"("+(r===""?".":r)+"+)?"+(e.reverseFillMask===!0?"$":y+"*")):new RegExp("^"+D));d=S,h=D=>{const i=R.exec(e.reverseFillMask===!0?D:D.slice(0,S.length+1));i!==null&&(D=i.slice(1).join(""));const P=[],G=T.length;for(let W=0,Q=D;W<G;W++){const re=T[W].exec(Q);if(re===null)break;Q=Q.slice(re.shift().length),P.push(...re)}return P.length!==0?P.join(""):D},l=S.map(D=>typeof D=="string"?D:H).join(""),s=l.split(H).join(u)}function z(o,u,y){const c=a.value,q=c.selectionEnd,S=c.value.length-q,F=b(o);u===!0&&O();const _=C(F),r=e.fillMask!==!1?L(_):_,R=m.value!==r;c.value!==r&&(c.value=r),R===!0&&(m.value=r),document.activeElement===c&&Y(()=>{if(r===s){const T=e.reverseFillMask===!0?s.length:0;c.setSelectionRange(T,T,"forward");return}if(y==="insertFromPaste"&&e.reverseFillMask!==!0){const T=c.selectionEnd;let D=q-1;for(let i=v;i<=D&&i<T;i++)l[i]!==H&&D++;E.right(c,D);return}if(["deleteContentBackward","deleteContentForward"].indexOf(y)>-1){const T=e.reverseFillMask===!0?q===0?r.length>_.length?1:0:Math.max(0,r.length-(r===s?0:Math.min(_.length,S)+1))+1:q;c.setSelectionRange(T,T,"forward");return}if(e.reverseFillMask===!0)if(R===!0){const T=Math.max(0,r.length-(r===s?0:Math.min(_.length,S+1)));T===1&&q===1?c.setSelectionRange(T,T,"forward"):E.rightReverse(c,T)}else{const T=r.length-S;c.setSelectionRange(T,T,"backward")}else if(R===!0){const T=Math.max(0,l.indexOf(H),Math.min(_.length,q)-1);E.right(c,T)}else{const T=q-1;E.right(c,T)}});const Z=e.unmaskedValue===!0?b(r):r;String(e.modelValue)!==Z&&(e.modelValue!==null||Z!=="")&&n(Z,!0)}function U(o,u,y){const c=C(b(o.value));u=Math.max(0,l.indexOf(H),Math.min(c.length,u)),v=u,o.setSelectionRange(u,y,"forward")}const E={left(o,u){const y=l.slice(u-1).indexOf(H)===-1;let c=Math.max(0,u-1);for(;c>=0;c--)if(l[c]===H){u=c,y===!0&&u++;break}if(c<0&&l[u]!==void 0&&l[u]!==H)return E.right(o,0);u>=0&&o.setSelectionRange(u,u,"backward")},right(o,u){const y=o.value.length;let c=Math.min(y,u+1);for(;c<=y;c++)if(l[c]===H){u=c;break}else l[c-1]===H&&(u=c);if(c>y&&l[u-1]!==void 0&&l[u-1]!==H)return E.left(o,y);o.setSelectionRange(u,u,"forward")},leftReverse(o,u){const y=A(o.value.length);let c=Math.max(0,u-1);for(;c>=0;c--)if(y[c-1]===H){u=c;break}else if(y[c]===H&&(u=c,c===0))break;if(c<0&&y[u]!==void 0&&y[u]!==H)return E.rightReverse(o,0);u>=0&&o.setSelectionRange(u,u,"backward")},rightReverse(o,u){const y=o.value.length,c=A(y),q=c.slice(0,u+1).indexOf(H)===-1;let S=Math.min(y,u+1);for(;S<=y;S++)if(c[S-1]===H){u=S,u>0&&q===!0&&u--;break}if(S>y&&c[u-1]!==void 0&&c[u-1]!==H)return E.leftReverse(o,y);o.setSelectionRange(u,u,"forward")}};function N(o){t("click",o),f=void 0}function x(o){if(t("keydown",o),kt(o)===!0||o.altKey===!0)return;const u=a.value,y=u.selectionStart,c=u.selectionEnd;if(o.shiftKey||(f=void 0),o.keyCode===37||o.keyCode===39){o.shiftKey&&f===void 0&&(f=u.selectionDirection==="forward"?y:c);const q=E[(o.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(o.preventDefault(),q(u,f===y?c:y),o.shiftKey){const S=u.selectionStart;u.setSelectionRange(Math.min(f,S),Math.max(f,S),"forward")}}else o.keyCode===8&&e.reverseFillMask!==!0&&y===c?(E.left(u,y),u.setSelectionRange(u.selectionStart,c,"backward")):o.keyCode===46&&e.reverseFillMask===!0&&y===c&&(E.rightReverse(u,c),u.setSelectionRange(y,u.selectionEnd,"forward"))}function C(o){if(o==null||o==="")return"";if(e.reverseFillMask===!0)return M(o);const u=d;let y=0,c="";for(let q=0;q<u.length;q++){const S=o[y],F=u[q];if(typeof F=="string")c+=F,S===F&&y++;else if(S!==void 0&&F.regex.test(S))c+=F.transform!==void 0?F.transform(S):S,y++;else return c}return c}function M(o){const u=d,y=l.indexOf(H);let c=o.length-1,q="";for(let S=u.length-1;S>=0&&c>-1;S--){const F=u[S];let _=o[c];if(typeof F=="string")q=F+q,_===F&&c--;else if(_!==void 0&&F.regex.test(_))do q=(F.transform!==void 0?F.transform(_):_)+q,c--,_=o[c];while(y===S&&_!==void 0&&F.regex.test(_));else return q}return q}function b(o){return typeof o!="string"||h===void 0?typeof o=="number"?h(""+o):o:h(o)}function L(o){return s.length-o.length<=0?o:e.reverseFillMask===!0&&o.length!==0?s.slice(0,-o.length)+o:o+s.slice(o.length)}return{innerValue:m,hasMask:p,moveCursorForPaste:U,updateMaskValue:z,onMaskedKeydown:x,onMaskedClick:N}}const cn={name:String};function dn(e){return w(()=>e.name||e.for)}function fn(e,t){function n(){const a=e.modelValue;try{const l="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(a)===a&&("length"in a?Array.from(a):[a]).forEach(s=>{l.items.add(s)}),{files:l.files}}catch{return{files:void 0}}}return t===!0?w(()=>{if(e.type==="file")return n()}):w(n)}const vn=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,gn=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,mn=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,hn=/[a-z0-9_ -]$/i;function pn(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(St.is.firefox===!0?hn.test(n.data)===!1:vn.test(n.data)===!0||gn.test(n.data)===!0||mn.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var bn=X({name:"QInput",inheritAttrs:!1,props:{...nn,...sn,...cn,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...an,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:a}=J(),{$q:l}=a,s={};let d=NaN,h,v,f=null,p;const m=$(null),V=dn(e),{innerValue:k,hasMask:A,moveCursorForPaste:O,updateMaskValue:z,onMaskedKeydown:U,onMaskedClick:E}=un(e,t,_,m),N=fn(e,!0),x=w(()=>Re(k.value)),C=pn(S),M=ln(),b=w(()=>e.type==="textarea"||e.autogrow===!0),L=w(()=>b.value===!0||["text","search","url","tel","password"].includes(e.type)),o=w(()=>{const i={...M.splitAttrs.listeners.value,onInput:S,onPaste:q,onChange:R,onBlur:Z,onFocus:Ae};return i.onCompositionstart=i.onCompositionupdate=i.onCompositionend=C,A.value===!0&&(i.onKeydown=U,i.onClick=E),e.autogrow===!0&&(i.onAnimationend=F),i}),u=w(()=>{const i={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:V.value,...M.splitAttrs.attributes.value,id:M.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return b.value===!1&&(i.type=e.type),e.autogrow===!0&&(i.rows=1),i});B(()=>e.type,()=>{m.value&&(m.value.value=e.modelValue)}),B(()=>e.modelValue,i=>{if(A.value===!0){if(v===!0&&(v=!1,String(i)===d))return;z(i)}else k.value!==i&&(k.value=i,e.type==="number"&&s.hasOwnProperty("value")===!0&&(h===!0?h=!1:delete s.value));e.autogrow===!0&&Y(r)}),B(()=>e.autogrow,i=>{i===!0?Y(r):m.value!==null&&n.rows>0&&(m.value.style.height="auto")}),B(()=>e.dense,()=>{e.autogrow===!0&&Y(r)});function y(){ut(()=>{const i=document.activeElement;m.value!==null&&m.value!==i&&(i===null||i.id!==M.targetUid.value)&&m.value.focus({preventScroll:!0})})}function c(){m.value!==null&&m.value.select()}function q(i){if(A.value===!0&&e.reverseFillMask!==!0){const P=i.target;O(P,P.selectionStart,P.selectionEnd)}t("paste",i)}function S(i){if(!i||!i.target)return;if(e.type==="file"){t("update:modelValue",i.target.files);return}const P=i.target.value;if(i.target.qComposing===!0){s.value=P;return}if(A.value===!0)z(P,!1,i.inputType);else if(_(P),L.value===!0&&i.target===document.activeElement){const{selectionStart:G,selectionEnd:W}=i.target;G!==void 0&&W!==void 0&&Y(()=>{i.target===document.activeElement&&P.indexOf(i.target.value)===0&&i.target.setSelectionRange(G,W)})}e.autogrow===!0&&r()}function F(i){t("animationend",i),r()}function _(i,P){p=()=>{f=null,e.type!=="number"&&s.hasOwnProperty("value")===!0&&delete s.value,e.modelValue!==i&&d!==i&&(d=i,P===!0&&(v=!0),t("update:modelValue",i),Y(()=>{d===i&&(d=NaN)})),p=void 0},e.type==="number"&&(h=!0,s.value=i),e.debounce!==void 0?(f!==null&&clearTimeout(f),s.value=i,f=setTimeout(p,e.debounce)):p()}function r(){requestAnimationFrame(()=>{const i=m.value;if(i!==null){const P=i.parentNode.style,{scrollTop:G}=i,{overflowY:W,maxHeight:Q}=l.platform.is.firefox===!0?{}:window.getComputedStyle(i),re=W!==void 0&&W!=="scroll";re===!0&&(i.style.overflowY="hidden"),P.marginBottom=i.scrollHeight-1+"px",i.style.height="1px",i.style.height=i.scrollHeight+"px",re===!0&&(i.style.overflowY=parseInt(Q,10)<i.scrollHeight?"auto":"hidden"),P.marginBottom="",i.scrollTop=G}})}function R(i){C(i),f!==null&&(clearTimeout(f),f=null),p!==void 0&&p(),t("change",i.target.value)}function Z(i){i!==void 0&&Ae(i),f!==null&&(clearTimeout(f),f=null),p!==void 0&&p(),h=!1,v=!1,delete s.value,e.type!=="file"&&setTimeout(()=>{m.value!==null&&(m.value.value=k.value!==void 0?k.value:"")})}function T(){return s.hasOwnProperty("value")===!0?s.value:k.value!==void 0?k.value:""}ae(()=>{Z()}),ne(()=>{e.autogrow===!0&&r()}),Object.assign(M,{innerValue:k,fieldClass:w(()=>`q-${b.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:w(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:m,emitValue:_,hasValue:x,floatingLabel:w(()=>x.value===!0&&(e.type!=="number"||isNaN(k.value)===!1)||Re(e.displayValue)),getControl:()=>g(b.value===!0?"textarea":"input",{ref:m,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...u.value,...o.value,...e.type!=="file"?{value:T()}:N.value}),getShadowControl:()=>g("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(b.value===!0?"":" text-no-wrap")},[g("span",{class:"invisible"},T()),g("span",e.shadowText)])});const D=on(M);return Object.assign(a,{focus:y,select:c,getNativeElement:()=>m.value}),tt(a,"nativeEl",()=>m.value),D}}),yn=X({name:"QCardActions",props:{...Et,vertical:Boolean},setup(e,{slots:t}){const n=Ft(e),a=w(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>g("div",{class:a.value},te(t.default))}}),wn=X({name:"QCard",props:{...at,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=J(),a=lt(e,n),l=w(()=>"q-card"+(a.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>g(e.tag,{class:l.value},te(t.default))}});function je(e,t){if(typeof e=="undefined"||e===null)return"";var n=t||typeof t=="undefined"?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+n+"$2")}const xn=qt("chat",{state:()=>({chatState:!1,total:0,messages:[]}),getters:{messagesTotal:e=>e.total,messagesCount:e=>e.messages.length,messageList:e=>e.messages},actions:{hide(){const e=this;e.chatState=!1,console.log("chatState",e.chatState)},show(){const e=this;e.chatState=!0,console.log("chatState",e.chatState)},attachMessage(e){this.messages.push({role:"user",content:e})},async send(e){const t=this;await Be.post(`chat?q=${e}`,{},{withCredentials:!0,crossDomain:!0}).then(n=>{t.total=n.data.total,t.messages=n.data.messages.map(a=>{var l,s;return a.content=je((s=(l=a==null?void 0:a.content[0])==null?void 0:l.text)==null?void 0:s.value),a}).reverse()})},async loadMessages(){const e=this;await Be.post("history",{},{withCredentials:!0,crossDomain:!0}).then(t=>{e.total=t.data.total,e.messages=t.data.messages.map(n=>{var a,l;return n.content=je((l=(a=n==null?void 0:n.content[0])==null?void 0:a.text)==null?void 0:l.value),n}).reverse(),e.messages.length>0&&(e.chatState=!0)})}}});const Cn=Mt({name:"AssistantChat",setup(){const e=xn(),t=w(()=>e.messageList),n=w(()=>e.messagesTotal),a=w(()=>e.messagesCount),l=w(()=>e.chatState),s=async()=>e.hide(),d=async()=>e.show(),h=async A=>await e.attachMessage(A),v=async A=>await e.send(A),f=async()=>await e.loadMessages(),p=$(""),m=$(!1),V=$(null),k=$(null);return{state:l,message:p,loading:m,scrollTargetRef:V,scrollList:k,store:e,messages:t,messagesCount:a,messagesTotal:n,hide:s,show:d,attachMessage:h,sendMessage:v,loadMessages:f}},mounted(){B(this.messagesCount,e=>{this.scrollDown()}),this.loadMessages(),this.$forceUpdate(),this.$nextTick(()=>{this.scrollDown()}),setInterval(()=>{this.loadMessages()},3e5)},methods:{async onSend(){this.attachMessage(this.message),this.$forceUpdate(),this.scrollDown(),this.$nextTick(()=>{this.loading=!0,this.sendMessage(this.message).then(()=>{this.$forceUpdate()}).finally(()=>{this.loading=!1,this.scrollDown()}),this.message=""})},async onUpdate(){this.loading=!0,await this.loadMessages(),this.loading=!1,this.$forceUpdate()},async onLoad(e,t){t()},scrollDown(){this.$nextTick(()=>{const e=document.querySelector(".scroll");e&&(e.scrollTop=e.scrollHeight)})}}}),kn={class:"row"},Sn={class:"col"},qn={class:"text-h6"},Mn={class:"text-subtitle2"},_n={class:"col-auto"},Rn={ref:"scrollTargetRef",class:"scroll q-px-md",style:{"max-height":"400px"}},$n={class:"row justify-center q-my-md"};function An(e,t,n,a,l,s){return ee(),Te("div",null,[e.state?(ee(),ie(wn,{key:0,class:"my-card",style:Tt([{position:"fixed",right:"20px",bottom:"20px"},e.$q.platform.is.mobile?"width: calc(100vw - 40px);":"width: 300px;"])},{default:j(()=>[K(It,{class:"bg-cyan-8 text-white"},{default:j(()=>[le("div",kn,[le("div",Sn,[le("div",qn,we(e.$t("chat.label")),1),le("div",Mn,we(e.$t("chat.messagesCount",{count:e.messagesCount})),1)]),le("div",_n,[K(xe,{dense:"",flat:"",onClick:e.hide},{default:j(()=>[K(ue,{name:"close"})]),_:1},8,["onClick"])])])]),_:1}),K(Bt),le("div",Rn,[K(Kt,{onLoad:e.onLoad,"scroll-target":e.scrollTargetRef,offset:250,reverse:"",ref:"scrollList"},{loading:j(()=>[le("div",$n,[K(jt,{color:"primary"})])]),default:j(()=>[(ee(!0),Te(_t,null,Rt(e.messages,(d,h)=>(ee(),ie(Qt,{key:h,text:[d.content],"text-html":"",name:d.role==="user"?"You":"Assistant",sent:d.role==="user"},null,8,["text","name","sent"]))),128))]),_:1},8,["onLoad","scroll-target"])],512),K(yn,{style:{"max-height":"160px"}},{default:j(()=>[K(bn,{outlined:"","bottom-slots":"",autogrow:"",counter:"",dense:"",borderless:"",modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=d=>e.message=d),type:"textarea",maxlength:"100",class:"col-12"},{append:j(()=>[e.message!==""?(ee(),ie(ue,{key:0,name:"close",onClick:t[0]||(t[0]=d=>e.message=""),class:"cursor-pointer"})):$t("",!0)]),hint:j(()=>[At(we(e.$t("chat.messageLength")),1)]),after:j(()=>[e.loading?(ee(),ie(Ke,{key:0,class:"q-ml-sm",color:"primary"})):(ee(),ie(xe,{key:1,onClick:e.onSend,round:"",dense:"",flat:"",icon:"send"},null,8,["onClick"]))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["style"])):(ee(),ie(xe,{key:1,round:"",class:"animate__animated animate__infinite animate__pulse",style:{position:"fixed",right:"20px",bottom:"20px"},color:"cyan",size:"lg",onClick:e.show},{default:j(()=>[K(ue,{name:"chat_bubble"})]),_:1},8,["onClick"]))])}var Tn=nt(Cn,[["render",An]]);const Vn={components:{AssistantChat:Tn},setup(){return{year:$(new Date().getFullYear())}}};function En(e,t,n,a,l,s){const d=Ve("router-view"),h=Ve("assistant-chat");return ee(),ie(Nt,{view:"hHh lpR fFf"},{default:j(()=>[K(zt,null,{default:j(()=>[K(d)]),_:1}),K(h)]),_:1})}var On=nt(Vn,[["render",En]]);export{On as default};
