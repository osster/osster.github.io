import{c as j,h as G,a as Ze,g as ft,u as vt,b as gt,d as mt,Q as qe,e as We}from"./use-router-link.c542c533.js";import{i as Ve,k as ie,l as Te,p as Ye,c as b,h as m,m as ht,g as W,r as $,n as we,o as ne,q as te,t as Xe,u as J,v as pe,w as A,x as fe,a as bt,y as Je,z as Ge,A as et,B as pt,C as tt,D as yt,E as wt,G as se,H as xt,I as Ct,J as kt,K as Ae,L as St,d as qt,_ as nt,M as ae,N as Fe,f as Z,O as K,P as oe,Q as ce,F as Mt,R as _t,S as ue,U as Rt,V as $t,W as Be}from"./index.468e0b55.js";import{c as Ee,g as Vt,h as ze,u as Tt,a as At,Q as Ft}from"./QBtn.c754e9a2.js";import{u as lt,a as at,Q as Bt}from"./QSeparator.16695b2a.js";import{chatApi as Le}from"./axios.0ee5997b.js";var Et=j({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:n}}=W(),l=Ve(Te,ie);if(l===ie)return console.error("QPageContainer needs to be child of QLayout"),ie;Ye(ht,!0);const a=b(()=>{const o={};return l.header.space===!0&&(o.paddingTop=`${l.header.size}px`),l.right.space===!0&&(o[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(o.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(o[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),o});return()=>m("div",{class:"q-page-container",style:a.value},G(t.default))}}),zt=j({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:t}){const n=b(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>m("div",{class:n.value},G(t.default))}}),Lt=j({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const n=b(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>m("div",{class:n.value,role:"toolbar"},G(t.default))}});function Pt(){const e=$(!we.value);return e.value===!1&&ne(()=>{e.value=!0}),e}const ot=typeof ResizeObserver!="undefined",Pe=ot===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var Me=j({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let n=null,l,a={width:-1,height:-1};function o(g){g===!0||e.debounce===0||e.debounce==="0"?i():n===null&&(n=setTimeout(i,e.debounce))}function i(){if(n!==null&&(clearTimeout(n),n=null),l){const{offsetWidth:g,offsetHeight:d}=l;(g!==a.width||d!==a.height)&&(a={width:g,height:d},t("resize",a))}}const{proxy:p}=W();if(p.trigger=o,ot===!0){let g;const d=y=>{l=p.$el.parentNode,l?(g=new ResizeObserver(o),g.observe(l),i()):y!==!0&&J(()=>{d(!0)})};return ne(()=>{d()}),te(()=>{n!==null&&clearTimeout(n),g!==void 0&&(g.disconnect!==void 0?g.disconnect():l&&g.unobserve(l))}),Xe}else{let y=function(){n!==null&&(clearTimeout(n),n=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",o,pe.passive),d=void 0)},h=function(){y(),l&&l.contentDocument&&(d=l.contentDocument.defaultView,d.addEventListener("resize",o,pe.passive),i())};const g=Pt();let d;return ne(()=>{J(()=>{l=p.$el,l&&h()})}),te(y),()=>{if(g.value===!0)return m("object",{style:Pe.style,tabindex:-1,type:"text/html",data:Pe.url,"aria-hidden":"true",onLoad:h})}}}}),Ht=j({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:n}){const{proxy:{$q:l}}=W(),a=Ve(Te,ie);if(a===ie)return console.error("QFooter needs to be child of QLayout"),ie;const o=$(parseInt(e.heightHint,10)),i=$(!0),p=$(we.value===!0||a.isContainer.value===!0?0:window.innerHeight),g=b(()=>e.reveal===!0||a.view.value.indexOf("F")>-1||l.platform.is.ios&&a.isContainer.value===!0),d=b(()=>a.isContainer.value===!0?a.containerHeight.value:p.value),y=b(()=>{if(e.modelValue!==!0)return 0;if(g.value===!0)return i.value===!0?o.value:0;const f=a.scroll.value.position+d.value+o.value-a.height.value;return f>0?f:0}),h=b(()=>e.modelValue!==!0||g.value===!0&&i.value!==!0),E=b(()=>e.modelValue===!0&&h.value===!0&&e.reveal===!0),S=b(()=>"q-footer q-layout__section--marginal "+(g.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(h.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(g.value!==!0?" hidden":""):"")),z=b(()=>{const f=a.rows.value.bottom,k={};return f[0]==="l"&&a.left.space===!0&&(k[l.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),f[2]==="r"&&a.right.space===!0&&(k[l.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),k});function V(f,k){a.update("footer",f,k)}function T(f,k){f.value!==k&&(f.value=k)}function I({height:f}){T(o,f),V("size",f)}function F(){if(e.reveal!==!0)return;const{direction:f,position:k,inflectionPoint:w}=a.scroll.value;T(i,f==="up"||k-w<100||a.height.value-d.value-k-o.value<300)}function O(f){E.value===!0&&T(i,!0),n("focusin",f)}A(()=>e.modelValue,f=>{V("space",f),T(i,!0),a.animate()}),A(y,f=>{V("offset",f)}),A(()=>e.reveal,f=>{f===!1&&T(i,e.modelValue)}),A(i,f=>{a.animate(),n("reveal",f)}),A([o,a.scroll,a.height],F),A(()=>l.screen.height,f=>{a.isContainer.value!==!0&&T(p,f)});const C={};return a.instances.footer=C,e.modelValue===!0&&V("size",o.value),V("space",e.modelValue),V("offset",y.value),te(()=>{a.instances.footer===C&&(a.instances.footer=void 0,V("size",0),V("offset",0),V("space",!1))}),()=>{const f=Ze(t.default,[m(Me,{debounce:0,onResize:I})]);return e.elevated===!0&&f.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),m("footer",{class:S.value,style:z.value,onFocusin:O},f)}}});const Ot=[null,document,document.body,document.scrollingElement,document.documentElement];function rt(e,t){let n=Vt(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return Ot.includes(n)?window:n}function ve(e){return(e===window?document.body:e).scrollHeight}function de(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function Nt(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function it(e,t,n=0){const l=arguments[3]===void 0?performance.now():arguments[3],a=de(e);if(n<=0){a!==t&&_e(e,t);return}requestAnimationFrame(o=>{const i=o-l,p=a+(t-a)/Math.max(i,n)*i;_e(e,p),p!==t&&it(e,t,n-i,o)})}function _e(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function xe(e,t,n){if(n){it(e,t,n);return}_e(e,t)}let ge;function Ce(){if(ge!==void 0)return ge;const e=document.createElement("p"),t=document.createElement("div");Ee(e,{width:"100%",height:"200px"}),Ee(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let l=e.offsetWidth;return n===l&&(l=t.clientWidth),t.remove(),ge=n-l,ge}const{passive:He}=pe,Qt=["both","horizontal","vertical"];var Dt=j({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Qt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:t}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,a,o;A(()=>e.scrollTarget,()=>{g(),p()});function i(){l!==null&&l();const h=Math.max(0,de(a)),E=Nt(a),S={top:h-n.position.top,left:E-n.position.left};if(e.axis==="vertical"&&S.top===0||e.axis==="horizontal"&&S.left===0)return;const z=Math.abs(S.top)>=Math.abs(S.left)?S.top<0?"up":"down":S.left<0?"left":"right";n.position={top:h,left:E},n.directionChanged=n.direction!==z,n.delta=S,n.directionChanged===!0&&(n.direction=z,n.inflectionPoint=n.position),t("scroll",{...n})}function p(){a=rt(o,e.scrollTarget),a.addEventListener("scroll",d,He),d(!0)}function g(){a!==void 0&&(a.removeEventListener("scroll",d,He),a=void 0)}function d(h){if(h===!0||e.debounce===0||e.debounce==="0")i();else if(l===null){const[E,S]=e.debounce?[setTimeout(i,e.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];l=()=>{S(E),l=null}}}const{proxy:y}=W();return A(()=>y.$q.lang.rtl,i),ne(()=>{o=y.$el.parentNode,p()}),te(()=>{l!==null&&l(),g()}),Object.assign(y,{trigger:d,getPosition:()=>n}),Xe}}),It=j({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:n}){const{proxy:{$q:l}}=W(),a=$(null),o=$(l.screen.height),i=$(e.container===!0?0:l.screen.width),p=$({position:0,direction:"down",inflectionPoint:0}),g=$(0),d=$(we.value===!0?0:Ce()),y=b(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),h=b(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),E=b(()=>d.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${d.value}px`}:null),S=b(()=>d.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${d.value}px`,width:`calc(100% + ${d.value}px)`}:null);function z(C){if(e.container===!0||document.qScrollPrevented!==!0){const f={position:C.position.top,direction:C.direction,directionChanged:C.directionChanged,inflectionPoint:C.inflectionPoint.top,delta:C.delta.top};p.value=f,e.onScroll!==void 0&&n("scroll",f)}}function V(C){const{height:f,width:k}=C;let w=!1;o.value!==f&&(w=!0,o.value=f,e.onScrollHeight!==void 0&&n("scrollHeight",f),I()),i.value!==k&&(w=!0,i.value=k),w===!0&&e.onResize!==void 0&&n("resize",C)}function T({height:C}){g.value!==C&&(g.value=C,I())}function I(){if(e.container===!0){const C=o.value>g.value?Ce():0;d.value!==C&&(d.value=C)}}let F=null;const O={instances:{},view:b(()=>e.view),isContainer:b(()=>e.container),rootRef:a,height:o,containerHeight:g,scrollbarWidth:d,totalWidth:b(()=>i.value+d.value),rows:b(()=>{const C=e.view.toLowerCase().split(" ");return{top:C[0].split(""),middle:C[1].split(""),bottom:C[2].split("")}}),header:fe({size:0,offset:0,space:!1}),right:fe({size:300,offset:0,space:!1}),footer:fe({size:0,offset:0,space:!1}),left:fe({size:300,offset:0,space:!1}),scroll:p,animate(){F!==null?clearTimeout(F):document.body.classList.add("q-body--layout-animate"),F=setTimeout(()=>{F=null,document.body.classList.remove("q-body--layout-animate")},155)},update(C,f,k){O[C][f]=k}};if(Ye(Te,O),Ce()>0){let k=function(){C=null,f.classList.remove("hide-scrollbar")},w=function(){if(C===null){if(f.scrollHeight>l.screen.height)return;f.classList.add("hide-scrollbar")}else clearTimeout(C);C=setTimeout(k,300)},P=function(r){C!==null&&r==="remove"&&(clearTimeout(C),k()),window[`${r}EventListener`]("resize",w)},C=null;const f=document.body;A(()=>e.container!==!0?"add":"remove",P),e.container!==!0&&P("add"),bt(()=>{P("remove")})}return()=>{const C=Ze(t.default,[m(Dt,{onScroll:z}),m(Me,{onResize:V})]),f=m("div",{class:y.value,style:h.value,ref:e.container===!0?void 0:a,tabindex:-1},C);return e.container===!0?m("div",{class:"q-layout-container overflow-hidden",ref:a},[m(Me,{onResize:T}),m("div",{class:"absolute-full",style:E.value},[m("div",{class:"scroll",style:S.value},[f])])]):f}}}),Ut=j({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=b(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>m(e.tag,{class:n.value},G(t.default))}}),jt=j({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const n=b(()=>e.sent===!0?"sent":"received"),l=b(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),a=b(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),o=b(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),i=b(()=>e.size!==void 0?`col-${e.size}`:""),p=b(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function g(y){return t.stamp!==void 0?[y,m("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[y,m("div",{class:"q-message-stamp",[p.value.stamp]:e.stamp})]:[y]}function d(y,h){const E=h===!0?y.length>1?S=>S:S=>m("div",[S]):S=>m("div",{[p.value.msg]:S});return y.map((S,z)=>m("div",{key:z,class:a.value},[m("div",{class:l.value},g(E(S)))]))}return()=>{const y=[];t.avatar!==void 0?y.push(t.avatar()):e.avatar!==void 0&&y.push(m("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const h=[];t.name!==void 0?h.push(m("div",{class:`q-message-name q-message-name--${n.value}`},t.name())):e.name!==void 0&&h.push(m("div",{class:`q-message-name q-message-name--${n.value}`,[p.value.name]:e.name})),t.default!==void 0?h.push(d(ft(t.default()),!0)):e.text!==void 0&&h.push(d(e.text)),y.push(m("div",{class:i.value},h));const E=[];return t.label!==void 0?E.push(m("div",{class:"q-message-label"},t.label())):e.label!==void 0&&E.push(m("div",{class:"q-message-label",[p.value.label]:e.label})),E.push(m("div",{class:o.value},y)),m("div",{class:`q-message q-message-${n.value}`},E)}}});const Kt=[m("circle",{cx:"15",cy:"15",r:"15"},[m("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),m("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[m("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),m("circle",{cx:"105",cy:"15",r:"15"},[m("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Zt=j({name:"QSpinnerDots",props:vt,setup(e){const{cSize:t,classes:n}=gt(e);return()=>m("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Kt)}});const{passive:le}=pe;var Wt=j({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:{default:void 0},initialIndex:Number,disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:n}){const l=$(!1),a=$(!0),o=$(null),i=$(null);let p=e.initialIndex||0,g,d;const y=b(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function h(){if(e.disable===!0||l.value===!0||a.value===!1)return;const w=ve(g),P=de(g),r=ze(g);e.reverse===!1?Math.round(P+r+e.offset)>=Math.round(w)&&E():Math.round(P)<=e.offset&&E()}function E(){if(e.disable===!0||l.value===!0||a.value===!1)return;p++,l.value=!0;const w=ve(g);n("load",p,P=>{a.value===!0&&(l.value=!1,J(()=>{if(e.reverse===!0){const r=ve(g),c=de(g),x=r-w;xe(g,c+x)}P===!0?V():o.value&&o.value.closest("body")&&d()}))})}function S(){p=0}function z(){a.value===!1&&(a.value=!0,g.addEventListener("scroll",d,le)),h()}function V(){a.value===!0&&(a.value=!1,l.value=!1,g.removeEventListener("scroll",d,le),d!==void 0&&d.cancel!==void 0&&d.cancel())}function T(){if(g&&a.value===!0&&g.removeEventListener("scroll",d,le),g=rt(o.value,e.scrollTarget),a.value===!0){if(g.addEventListener("scroll",d,le),e.reverse===!0){const w=ve(g),P=ze(g);xe(g,w-P)}h()}}function I(w){p=w}function F(w){w=parseInt(w,10);const P=d;d=w<=0?h:et(h,isNaN(w)===!0?100:w),g&&a.value===!0&&(P!==void 0&&g.removeEventListener("scroll",P,le),g.addEventListener("scroll",d,le))}function O(w){if(C.value===!0){if(i.value===null){w!==!0&&J(()=>{O(!0)});return}const P=`${l.value===!0?"un":""}pauseAnimations`;Array.from(i.value.getElementsByTagName("svg")).forEach(r=>{r[P]()})}}const C=b(()=>e.disable!==!0&&a.value===!0);A([l,C],()=>{O()}),A(()=>e.disable,w=>{w===!0?V():z()}),A(()=>e.reverse,()=>{l.value===!1&&a.value===!0&&h()}),A(()=>e.scrollTarget,T),A(()=>e.debounce,F);let f=!1;Je(()=>{f!==!1&&g&&xe(g,f)}),Ge(()=>{f=g?de(g):!1}),te(()=>{a.value===!0&&g.removeEventListener("scroll",d,le)}),ne(()=>{F(e.debounce),T(),l.value===!1&&O()});const k=W();return Object.assign(k.proxy,{poll:()=>{d!==void 0&&d()},trigger:E,stop:V,reset:S,resume:z,setIndex:I}),()=>{const w=mt(t.default,[]);return C.value===!0&&w[e.reverse===!1?"push":"unshift"](m("div",{ref:i,class:y.value},G(t.loading))),m("div",{class:"q-infinite-scroll",ref:o},w)}}});function Yt({validate:e,resetValidation:t,requiresQForm:n}){const l=Ve(pt,!1);if(l!==!1){const{props:a,proxy:o}=W();Object.assign(o,{validate:e,resetValidation:t}),A(()=>a.disable,i=>{i===!0?(typeof t=="function"&&t(),l.unbindComponent(o)):l.bindComponent(o)}),ne(()=>{a.disable!==!0&&l.bindComponent(o)}),te(()=>{a.disable!==!0&&l.unbindComponent(o)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Oe=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Ne=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Qe=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,me=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,he=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,ke={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Oe.test(e),hexaColor:e=>Ne.test(e),hexOrHexaColor:e=>Qe.test(e),rgbColor:e=>me.test(e),rgbaColor:e=>he.test(e),rgbOrRgbaColor:e=>me.test(e)||he.test(e),hexOrRgbColor:e=>Oe.test(e)||me.test(e),hexaOrRgbaColor:e=>Ne.test(e)||he.test(e),anyColor:e=>Qe.test(e)||me.test(e)||he.test(e)},Xt=[!0,!1,"ondemand"],Jt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>Xt.includes(e)}};function Gt(e,t){const{props:n,proxy:l}=W(),a=$(!1),o=$(null),i=$(null);Yt({validate:z,resetValidation:S});let p=0,g;const d=b(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),y=b(()=>n.disable!==!0&&d.value===!0&&t.value===!1),h=b(()=>n.error===!0||a.value===!0),E=b(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:o.value);A(()=>n.modelValue,()=>{i.value=!0,y.value===!0&&n.lazyRules===!1&&V()}),A(()=>n.reactiveRules,T=>{T===!0?g===void 0&&(g=A(()=>n.rules,()=>{y.value===!0&&i.value===!0&&n.lazyRules!=="ondemand"&&V()},{immediate:!0})):g!==void 0&&(g(),g=void 0)},{immediate:!0}),A(()=>n.lazyRules,T=>{T===!1&&y.value===!0&&i.value===!0&&V()}),A(e,T=>{T===!0?i.value===null&&(i.value=n.lazyRules===!0):y.value===!0&&(n.lazyRules===!1||n.lazyRules===!0&&i.value===!0)&&V()});function S(){p++,t.value=!1,i.value=null,a.value=!1,o.value=null,V.cancel()}function z(T=n.modelValue){if(n.disable===!0||d.value===!1)return!0;const I=++p,F=t.value!==!0?()=>{i.value=!0}:()=>{},O=(f,k)=>{f===!0&&F(),a.value=f,o.value=k||null,t.value=!1},C=[];for(let f=0;f<n.rules.length;f++){const k=n.rules[f];let w;if(typeof k=="function"?w=k(T,ke):typeof k=="string"&&ke[k]!==void 0&&(w=ke[k](T)),w===!1||typeof w=="string")return O(!0,w),!1;w!==!0&&w!==void 0&&C.push(w)}return C.length===0?(O(!1),!0):(t.value=!0,Promise.all(C).then(f=>{if(f===void 0||Array.isArray(f)===!1||f.length===0)return I===p&&O(!1),!0;const k=f.find(w=>w===!1||typeof w=="string");return I===p&&O(k!==void 0,k),k===void 0},f=>(I===p&&(console.error(f),O(!0)),!1)))}const V=et(z,0);return te(()=>{g!==void 0&&g(),V.cancel()}),Object.assign(l,{resetValidation:S,validate:z}),tt(l,"hasError",()=>h.value),{isDirtyModel:i,hasRules:d,hasError:h,errorMessage:E,validate:z,resetValidation:S}}const De=/^on[A-Z]/;function en(e,t){const n={listeners:$({}),attributes:$({})};function l(){const a={},o={};for(const i in e)i!=="class"&&i!=="style"&&De.test(i)===!1&&(a[i]=e[i]);for(const i in t.props)De.test(i)===!0&&(o[i]=t.props[i]);n.attributes.value=a,n.listeners.value=o}return yt(l),l(),n}let Se,be=0;const D=new Array(256);for(let e=0;e<256;e++)D[e]=(e+256).toString(16).substring(1);const tn=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let l=t;l>0;l--)n.push(Math.floor(Math.random()*256));return n}})(),Ie=4096;function st(){(Se===void 0||be+16>Ie)&&(be=0,Se=tn(Ie));const e=Array.prototype.slice.call(Se,be,be+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,D[e[0]]+D[e[1]]+D[e[2]]+D[e[3]]+"-"+D[e[4]]+D[e[5]]+"-"+D[e[6]]+D[e[7]]+"-"+D[e[8]]+D[e[9]]+"-"+D[e[10]]+D[e[11]]+D[e[12]]+D[e[13]]+D[e[14]]+D[e[15]]}let Re=[],nn=[];function ut(e){nn.length===0?e():Re.push(e)}function ln(e){Re=Re.filter(t=>t!==e)}function ct(e,t){return e===void 0?t===!0?`f_${st()}`:void 0:e}function $e(e){return e!=null&&(""+e).length!==0}const an={...lt,...Jt,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},on=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function rn({requiredForAttr:e=!0,tagProp:t}={}){const{props:n,attrs:l,proxy:a,vnode:o}=W(),i=at(n,a.$q);return{requiredForAttr:e,tag:t===!0?b(()=>n.tag):{value:"label"},isDark:i,editable:b(()=>n.disable!==!0&&n.readonly!==!0),innerLoading:$(!1),focused:$(!1),hasPopupOpen:!1,splitAttrs:en(l,o),targetUid:$(ct(n.for,e)),rootRef:$(null),targetRef:$(null),controlRef:$(null)}}function sn(e){const{props:t,emit:n,slots:l,attrs:a,proxy:o}=W(),{$q:i}=o;let p=null;e.hasValue===void 0&&(e.hasValue=b(()=>$e(t.modelValue))),e.emitValue===void 0&&(e.emitValue=u=>{n("update:modelValue",u)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:r,onFocusout:c}),Object.assign(e,{clearValue:x,onControlFocusin:r,onControlFocusout:c,focus:w}),e.computedCounter===void 0&&(e.computedCounter=b(()=>{if(t.counter!==!1){const u=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,R=t.maxlength!==void 0?t.maxlength:t.maxValues;return u+(R!==void 0?" / "+R:"")}}));const{isDirtyModel:g,hasRules:d,hasError:y,errorMessage:h,resetValidation:E}=Gt(e.focused,e.innerLoading),S=e.floatingLabel!==void 0?b(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):b(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),z=b(()=>t.bottomSlots===!0||t.hint!==void 0||d.value===!0||t.counter===!0||t.error!==null),V=b(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),T=b(()=>`q-field row no-wrap items-start q-field--${V.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(S.value===!0?" q-field--float":"")+(F.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(y.value===!0?" q-field--error":"")+(y.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&z.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),I=b(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(y.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),F=b(()=>t.labelSlot===!0||t.label!==void 0),O=b(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&y.value!==!0?` text-${t.labelColor}`:"")),C=b(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:S.value,modelValue:t.modelValue,emitValue:e.emitValue})),f=b(()=>{const u={for:e.targetUid.value};return t.disable===!0&&(u["aria-disabled"]="true"),u});A(()=>t.for,u=>{e.targetUid.value=ct(u,e.requiredForAttr)});function k(){const u=document.activeElement;let R=e.targetRef!==void 0&&e.targetRef.value;R&&(u===null||u.id!==e.targetUid.value)&&(R.hasAttribute("tabindex")===!0||(R=R.querySelector("[tabindex]")),R&&R!==u&&R.focus({preventScroll:!0}))}function w(){ut(k)}function P(){ln(k);const u=document.activeElement;u!==null&&e.rootRef.value.contains(u)&&u.blur()}function r(u){p!==null&&(clearTimeout(p),p=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",u))}function c(u,R){p!==null&&clearTimeout(p),p=setTimeout(()=>{p=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",u)),R!==void 0&&R())})}function x(u){wt(u),i.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),n("clear",t.modelValue),J(()=>{E(),i.platform.is.mobile!==!0&&(g.value=!1)})}function v(){const u=[];return l.prepend!==void 0&&u.push(m("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:se},l.prepend())),u.push(m("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},M())),y.value===!0&&t.noErrorIcon===!1&&u.push(L("error",[m(qe,{name:i.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?u.push(L("inner-loading-append",l.loading!==void 0?l.loading():[m(We,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&u.push(L("inner-clearable-append",[m(qe,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||i.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:x})])),l.append!==void 0&&u.push(m("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:se},l.append())),e.getInnerAppend!==void 0&&u.push(L("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&u.push(e.getControlChild()),u}function M(){const u=[];return t.prefix!==void 0&&t.prefix!==null&&u.push(m("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&u.push(e.getShadowControl()),e.getControl!==void 0?u.push(e.getControl()):l.rawControl!==void 0?u.push(l.rawControl()):l.control!==void 0&&u.push(m("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},l.control(C.value))),F.value===!0&&u.push(m("div",{class:O.value},G(l.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&u.push(m("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),u.concat(G(l.default))}function q(){let u,R;y.value===!0?h.value!==null?(u=[m("div",{role:"alert"},h.value)],R=`q--slot-error-${h.value}`):(u=G(l.error),R="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(u=[m("div",t.hint)],R=`q--slot-hint-${t.hint}`):(u=G(l.hint),R="q--slot-hint"));const Y=t.counter===!0||l.counter!==void 0;if(t.hideBottomSpace===!0&&Y===!1&&u===void 0)return;const B=m("div",{key:R,class:"q-field__messages col"},u);return m("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:se},[t.hideBottomSpace===!0?B:m(xt,{name:"q-transition--field-message"},()=>B),Y===!0?m("div",{class:"q-field__counter"},l.counter!==void 0?l.counter():e.computedCounter.value):null])}function L(u,R){return R===null?null:m("div",{key:u,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},R)}let _=!1;return Ge(()=>{_=!0}),Je(()=>{_===!0&&t.autofocus===!0&&o.focus()}),ne(()=>{we.value===!0&&e.requiredForAttr===!0&&t.for===void 0&&(e.targetUid.value=`f_${st()}`),t.autofocus===!0&&o.focus()}),te(()=>{p!==null&&clearTimeout(p)}),Object.assign(o,{focus:w,blur:P}),function(){const R=e.getControl===void 0&&l.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...f.value}:f.value;return m(e.tag.value,{ref:e.rootRef,class:[T.value,a.class],style:a.style,...R},[l.before!==void 0?m("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:se},l.before()):null,m("div",{class:"q-field__inner relative-position col self-stretch"},[m("div",{ref:e.controlRef,class:I.value,tabindex:-1,...e.controlEvents},v()),z.value===!0?q():null]),l.after!==void 0?m("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:se},l.after()):null])}}const Ue={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ye={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},dt=Object.keys(ye);dt.forEach(e=>{ye[e].regex=new RegExp(ye[e].pattern)});const un=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+dt.join("")+"])|(.)","g"),je=/[.*+?^${}()|[\]\\]/g,N=String.fromCharCode(1),cn={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function dn(e,t,n,l){let a,o,i,p,g,d;const y=$(null),h=$(S());function E(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}A(()=>e.type+e.autogrow,V),A(()=>e.mask,r=>{if(r!==void 0)T(h.value,!0);else{const c=w(h.value);V(),e.modelValue!==c&&t("update:modelValue",c)}}),A(()=>e.fillMask+e.reverseFillMask,()=>{y.value===!0&&T(h.value,!0)}),A(()=>e.unmaskedValue,()=>{y.value===!0&&T(h.value)});function S(){if(V(),y.value===!0){const r=f(w(e.modelValue));return e.fillMask!==!1?P(r):r}return e.modelValue}function z(r){if(r<a.length)return a.slice(-r);let c="",x=a;const v=x.indexOf(N);if(v>-1){for(let M=r-x.length;M>0;M--)c+=N;x=x.slice(0,v)+c+x.slice(v)}return x}function V(){if(y.value=e.mask!==void 0&&e.mask.length!==0&&E(),y.value===!1){p=void 0,a="",o="";return}const r=Ue[e.mask]===void 0?e.mask:Ue[e.mask],c=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",x=c.replace(je,"\\$&"),v=[],M=[],q=[];let L=e.reverseFillMask===!0,_="",u="";r.replace(un,(Q,s,H,ee,X)=>{if(ee!==void 0){const U=ye[ee];q.push(U),u=U.negate,L===!0&&(M.push("(?:"+u+"+)?("+U.pattern+"+)?(?:"+u+"+)?("+U.pattern+"+)?"),L=!1),M.push("(?:"+u+"+)?("+U.pattern+")?")}else if(H!==void 0)_="\\"+(H==="\\"?"":H),q.push(H),v.push("([^"+_+"]+)?"+_+"?");else{const U=s!==void 0?s:X;_=U==="\\"?"\\\\\\\\":U.replace(je,"\\\\$&"),q.push(U),v.push("([^"+_+"]+)?"+_+"?")}});const R=new RegExp("^"+v.join("")+"("+(_===""?".":"[^"+_+"]")+"+)?"+(_===""?"":"["+_+"]*")+"$"),Y=M.length-1,B=M.map((Q,s)=>s===0&&e.reverseFillMask===!0?new RegExp("^"+x+"*"+Q):s===Y?new RegExp("^"+Q+"("+(u===""?".":u)+"+)?"+(e.reverseFillMask===!0?"$":x+"*")):new RegExp("^"+Q));i=q,p=Q=>{const s=R.exec(e.reverseFillMask===!0?Q:Q.slice(0,q.length+1));s!==null&&(Q=s.slice(1).join(""));const H=[],ee=B.length;for(let X=0,U=Q;X<ee;X++){const re=B[X].exec(U);if(re===null)break;U=U.slice(re.shift().length),H.push(...re)}return H.length!==0?H.join(""):Q},a=q.map(Q=>typeof Q=="string"?Q:N).join(""),o=a.split(N).join(c)}function T(r,c,x){const v=l.value,M=v.selectionEnd,q=v.value.length-M,L=w(r);c===!0&&V();const _=f(L),u=e.fillMask!==!1?P(_):_,R=h.value!==u;v.value!==u&&(v.value=u),R===!0&&(h.value=u),document.activeElement===v&&J(()=>{if(u===o){const B=e.reverseFillMask===!0?o.length:0;v.setSelectionRange(B,B,"forward");return}if(x==="insertFromPaste"&&e.reverseFillMask!==!0){const B=v.selectionEnd;let Q=M-1;for(let s=g;s<=Q&&s<B;s++)a[s]!==N&&Q++;F.right(v,Q);return}if(["deleteContentBackward","deleteContentForward"].indexOf(x)>-1){const B=e.reverseFillMask===!0?M===0?u.length>_.length?1:0:Math.max(0,u.length-(u===o?0:Math.min(_.length,q)+1))+1:M;v.setSelectionRange(B,B,"forward");return}if(e.reverseFillMask===!0)if(R===!0){const B=Math.max(0,u.length-(u===o?0:Math.min(_.length,q+1)));B===1&&M===1?v.setSelectionRange(B,B,"forward"):F.rightReverse(v,B)}else{const B=u.length-q;v.setSelectionRange(B,B,"backward")}else if(R===!0){const B=Math.max(0,a.indexOf(N),Math.min(_.length,M)-1);F.right(v,B)}else{const B=M-1;F.right(v,B)}});const Y=e.unmaskedValue===!0?w(u):u;String(e.modelValue)!==Y&&(e.modelValue!==null||Y!=="")&&n(Y,!0)}function I(r,c,x){const v=f(w(r.value));c=Math.max(0,a.indexOf(N),Math.min(v.length,c)),g=c,r.setSelectionRange(c,x,"forward")}const F={left(r,c){const x=a.slice(c-1).indexOf(N)===-1;let v=Math.max(0,c-1);for(;v>=0;v--)if(a[v]===N){c=v,x===!0&&c++;break}if(v<0&&a[c]!==void 0&&a[c]!==N)return F.right(r,0);c>=0&&r.setSelectionRange(c,c,"backward")},right(r,c){const x=r.value.length;let v=Math.min(x,c+1);for(;v<=x;v++)if(a[v]===N){c=v;break}else a[v-1]===N&&(c=v);if(v>x&&a[c-1]!==void 0&&a[c-1]!==N)return F.left(r,x);r.setSelectionRange(c,c,"forward")},leftReverse(r,c){const x=z(r.value.length);let v=Math.max(0,c-1);for(;v>=0;v--)if(x[v-1]===N){c=v;break}else if(x[v]===N&&(c=v,v===0))break;if(v<0&&x[c]!==void 0&&x[c]!==N)return F.rightReverse(r,0);c>=0&&r.setSelectionRange(c,c,"backward")},rightReverse(r,c){const x=r.value.length,v=z(x),M=v.slice(0,c+1).indexOf(N)===-1;let q=Math.min(x,c+1);for(;q<=x;q++)if(v[q-1]===N){c=q,c>0&&M===!0&&c--;break}if(q>x&&v[c-1]!==void 0&&v[c-1]!==N)return F.leftReverse(r,x);r.setSelectionRange(c,c,"forward")}};function O(r){t("click",r),d=void 0}function C(r){if(t("keydown",r),Ct(r)===!0||r.altKey===!0)return;const c=l.value,x=c.selectionStart,v=c.selectionEnd;if(r.shiftKey||(d=void 0),r.keyCode===37||r.keyCode===39){r.shiftKey&&d===void 0&&(d=c.selectionDirection==="forward"?x:v);const M=F[(r.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(r.preventDefault(),M(c,d===x?v:x),r.shiftKey){const q=c.selectionStart;c.setSelectionRange(Math.min(d,q),Math.max(d,q),"forward")}}else r.keyCode===8&&e.reverseFillMask!==!0&&x===v?(F.left(c,x),c.setSelectionRange(c.selectionStart,v,"backward")):r.keyCode===46&&e.reverseFillMask===!0&&x===v&&(F.rightReverse(c,v),c.setSelectionRange(x,c.selectionEnd,"forward"))}function f(r){if(r==null||r==="")return"";if(e.reverseFillMask===!0)return k(r);const c=i;let x=0,v="";for(let M=0;M<c.length;M++){const q=r[x],L=c[M];if(typeof L=="string")v+=L,q===L&&x++;else if(q!==void 0&&L.regex.test(q))v+=L.transform!==void 0?L.transform(q):q,x++;else return v}return v}function k(r){const c=i,x=a.indexOf(N);let v=r.length-1,M="";for(let q=c.length-1;q>=0&&v>-1;q--){const L=c[q];let _=r[v];if(typeof L=="string")M=L+M,_===L&&v--;else if(_!==void 0&&L.regex.test(_))do M=(L.transform!==void 0?L.transform(_):_)+M,v--,_=r[v];while(x===q&&_!==void 0&&L.regex.test(_));else return M}return M}function w(r){return typeof r!="string"||p===void 0?typeof r=="number"?p(""+r):r:p(r)}function P(r){return o.length-r.length<=0?r:e.reverseFillMask===!0&&r.length!==0?o.slice(0,-r.length)+r:r+o.slice(r.length)}return{innerValue:h,hasMask:y,moveCursorForPaste:I,updateMaskValue:T,onMaskedKeydown:C,onMaskedClick:O}}const fn={name:String};function vn(e){return b(()=>e.name||e.for)}function gn(e,t){function n(){const l=e.modelValue;try{const a="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(l)===l&&("length"in l?Array.from(l):[l]).forEach(o=>{a.items.add(o)}),{files:a.files}}catch{return{files:void 0}}}return t===!0?b(()=>{if(e.type==="file")return n()}):b(n)}const mn=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,hn=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,bn=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,pn=/[a-z0-9_ -]$/i;function yn(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(kt.is.firefox===!0?pn.test(n.data)===!1:mn.test(n.data)===!0||hn.test(n.data)===!0||bn.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var wn=j({name:"QInput",inheritAttrs:!1,props:{...an,...cn,...fn,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...on,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:l}=W(),{$q:a}=l,o={};let i=NaN,p,g,d=null,y;const h=$(null),E=vn(e),{innerValue:S,hasMask:z,moveCursorForPaste:V,updateMaskValue:T,onMaskedKeydown:I,onMaskedClick:F}=dn(e,t,_,h),O=gn(e,!0),C=b(()=>$e(S.value)),f=yn(q),k=rn(),w=b(()=>e.type==="textarea"||e.autogrow===!0),P=b(()=>w.value===!0||["text","search","url","tel","password"].includes(e.type)),r=b(()=>{const s={...k.splitAttrs.listeners.value,onInput:q,onPaste:M,onChange:R,onBlur:Y,onFocus:Ae};return s.onCompositionstart=s.onCompositionupdate=s.onCompositionend=f,z.value===!0&&(s.onKeydown=I,s.onClick=F),e.autogrow===!0&&(s.onAnimationend=L),s}),c=b(()=>{const s={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:E.value,...k.splitAttrs.attributes.value,id:k.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return w.value===!1&&(s.type=e.type),e.autogrow===!0&&(s.rows=1),s});A(()=>e.type,()=>{h.value&&(h.value.value=e.modelValue)}),A(()=>e.modelValue,s=>{if(z.value===!0){if(g===!0&&(g=!1,String(s)===i))return;T(s)}else S.value!==s&&(S.value=s,e.type==="number"&&o.hasOwnProperty("value")===!0&&(p===!0?p=!1:delete o.value));e.autogrow===!0&&J(u)}),A(()=>e.autogrow,s=>{s===!0?J(u):h.value!==null&&n.rows>0&&(h.value.style.height="auto")}),A(()=>e.dense,()=>{e.autogrow===!0&&J(u)});function x(){ut(()=>{const s=document.activeElement;h.value!==null&&h.value!==s&&(s===null||s.id!==k.targetUid.value)&&h.value.focus({preventScroll:!0})})}function v(){h.value!==null&&h.value.select()}function M(s){if(z.value===!0&&e.reverseFillMask!==!0){const H=s.target;V(H,H.selectionStart,H.selectionEnd)}t("paste",s)}function q(s){if(!s||!s.target)return;if(e.type==="file"){t("update:modelValue",s.target.files);return}const H=s.target.value;if(s.target.qComposing===!0){o.value=H;return}if(z.value===!0)T(H,!1,s.inputType);else if(_(H),P.value===!0&&s.target===document.activeElement){const{selectionStart:ee,selectionEnd:X}=s.target;ee!==void 0&&X!==void 0&&J(()=>{s.target===document.activeElement&&H.indexOf(s.target.value)===0&&s.target.setSelectionRange(ee,X)})}e.autogrow===!0&&u()}function L(s){t("animationend",s),u()}function _(s,H){y=()=>{d=null,e.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,e.modelValue!==s&&i!==s&&(i=s,H===!0&&(g=!0),t("update:modelValue",s),J(()=>{i===s&&(i=NaN)})),y=void 0},e.type==="number"&&(p=!0,o.value=s),e.debounce!==void 0?(d!==null&&clearTimeout(d),o.value=s,d=setTimeout(y,e.debounce)):y()}function u(){requestAnimationFrame(()=>{const s=h.value;if(s!==null){const H=s.parentNode.style,{scrollTop:ee}=s,{overflowY:X,maxHeight:U}=a.platform.is.firefox===!0?{}:window.getComputedStyle(s),re=X!==void 0&&X!=="scroll";re===!0&&(s.style.overflowY="hidden"),H.marginBottom=s.scrollHeight-1+"px",s.style.height="1px",s.style.height=s.scrollHeight+"px",re===!0&&(s.style.overflowY=parseInt(U,10)<s.scrollHeight?"auto":"hidden"),H.marginBottom="",s.scrollTop=ee}})}function R(s){f(s),d!==null&&(clearTimeout(d),d=null),y!==void 0&&y(),t("change",s.target.value)}function Y(s){s!==void 0&&Ae(s),d!==null&&(clearTimeout(d),d=null),y!==void 0&&y(),p=!1,g=!1,delete o.value,e.type!=="file"&&setTimeout(()=>{h.value!==null&&(h.value.value=S.value!==void 0?S.value:"")})}function B(){return o.hasOwnProperty("value")===!0?o.value:S.value!==void 0?S.value:""}te(()=>{Y()}),ne(()=>{e.autogrow===!0&&u()}),Object.assign(k,{innerValue:S,fieldClass:b(()=>`q-${w.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:b(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:h,emitValue:_,hasValue:C,floatingLabel:b(()=>C.value===!0&&(e.type!=="number"||isNaN(S.value)===!1)||$e(e.displayValue)),getControl:()=>m(w.value===!0?"textarea":"input",{ref:h,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...c.value,...r.value,...e.type!=="file"?{value:B()}:O.value}),getShadowControl:()=>m("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(w.value===!0?"":" text-no-wrap")},[m("span",{class:"invisible"},B()),m("span",e.shadowText)])});const Q=sn(k);return Object.assign(l,{focus:x,select:v,getNativeElement:()=>h.value}),tt(l,"nativeEl",()=>h.value),Q}}),xn=j({name:"QCardActions",props:{...Tt,vertical:Boolean},setup(e,{slots:t}){const n=At(e),l=b(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>m("div",{class:l.value},G(t.default))}}),Cn=j({name:"QCard",props:{...lt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=W(),l=at(e,n),a=b(()=>"q-card"+(l.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>m(e.tag,{class:a.value},G(t.default))}});function Ke(e,t){if(typeof e=="undefined"||e===null)return"";var n=t||typeof t=="undefined"?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+n+"$2")}const kn=St("chat",{state:()=>({total:0,messages:[]}),getters:{messagesTotal:e=>e.total,messagesCount:e=>e.messages.length,messageList:e=>e.messages},actions:{attachMessage(e){this.messages.push({role:"user",content:e})},async send(e){const t=this;await Le.get(`chat?q=${e}`).then(n=>{t.total=n.data.total,t.messages=n.data.messages.map(l=>{var a,o;return l.content=Ke((o=(a=l==null?void 0:l.content[0])==null?void 0:a.text)==null?void 0:o.value),l}).reverse()})},async loadMessages(){const e=this;await Le.get("history").then(t=>{e.total=t.data.total,e.messages=t.data.messages.map(n=>{var l,a;return n.content=Ke((a=(l=n==null?void 0:n.content[0])==null?void 0:l.text)==null?void 0:a.value),n}).reverse()})}}});const Sn=qt({name:"AssistantChat",setup(){const e=kn(),t=b(()=>e.messageList),n=b(()=>e.messagesTotal),l=b(()=>e.messagesCount),a=async h=>await e.attachMessage(h),o=async h=>await e.send(h),i=async()=>await e.loadMessages(),p=$(""),g=$(!1),d=$(null),y=$(null);return{message:p,loading:g,scrollTargetRef:d,scrollList:y,store:e,messages:t,messagesCount:l,messagesTotal:n,attachMessage:a,sendMessage:o,loadMessages:i}},mounted(){A(this.messagesCount,e=>{this.scrollDown()}),this.loadMessages(),this.$forceUpdate(),this.$nextTick(()=>{this.scrollDown()})},methods:{async onSend(){this.attachMessage(this.message),this.$forceUpdate(),this.scrollDown(),this.$nextTick(()=>{this.loading=!0,this.sendMessage(this.message).then(()=>{this.$forceUpdate()}).finally(()=>{this.loading=!1,this.scrollDown()}),this.message=""})},async onUpdate(){this.loading=!0,await this.loadMessages(),this.loading=!1,this.$forceUpdate()},async onLoad(e,t){console.log("onLoad",e),t()},scrollDown(){this.$nextTick(()=>{const e=document.querySelector(".scroll");e&&(e.scrollTop=e.scrollHeight)})}}}),qn={class:"text-h6"},Mn={class:"text-subtitle2"},_n={ref:"scrollTargetRef",class:"scroll q-px-md",style:{"max-height":"400px"}},Rn={class:"row justify-center q-my-md"};function $n(e,t,n,l,a,o){return ae(),Fe("div",null,[Z(Cn,{class:"my-card",style:{width:"300px",position:"fixed",right:"20px",bottom:"20px"}},{default:K(()=>[Z(Ut,{class:"bg-cyan-8 text-white"},{default:K(()=>[oe("div",qn,ce(e.$t("chat.label")),1),oe("div",Mn,ce(e.$t("chat.messagesCount",{count:e.messagesCount})),1)]),_:1}),Z(Bt),oe("div",_n,[Z(Wt,{onLoad:e.onLoad,"scroll-target":e.scrollTargetRef,offset:250,reverse:"",ref:"scrollList"},{loading:K(()=>[oe("div",Rn,[Z(Zt,{color:"primary"})])]),default:K(()=>[(ae(!0),Fe(Mt,null,_t(e.messages,(i,p)=>(ae(),ue(jt,{key:p,text:[i.content],"text-html":"",name:i.role==="user"?"You":"Assistant",sent:i.role==="user"},null,8,["text","name","sent"]))),128))]),_:1},8,["onLoad","scroll-target"])],512),Z(xn,{style:{"max-height":"160px"}},{default:K(()=>[Z(wn,{outlined:"","bottom-slots":"",autogrow:"",counter:"",dense:"",borderless:"",modelValue:e.message,"onUpdate:modelValue":t[1]||(t[1]=i=>e.message=i),type:"textarea",maxlength:"100",class:"col-12"},{append:K(()=>[e.message!==""?(ae(),ue(qe,{key:0,name:"close",onClick:t[0]||(t[0]=i=>e.message=""),class:"cursor-pointer"})):Rt("",!0)]),hint:K(()=>[$t(ce(e.$t("chat.messageLength")),1)]),after:K(()=>[e.loading?(ae(),ue(We,{key:0,class:"q-ml-sm",color:"primary"})):(ae(),ue(Ft,{key:1,onClick:e.onSend,round:"",dense:"",flat:"",icon:"send"},null,8,["onClick"]))]),_:1},8,["modelValue"])]),_:1})]),_:1})])}var Vn=nt(Sn,[["render",$n]]);const Tn={components:{AssistantChat:Vn},setup(){return{year:$(new Date().getFullYear())}}},An={class:"text-subtitle1 q-mr-sm"},Fn={class:"text-overline"};function Bn(e,t,n,l,a,o){const i=Be("router-view"),p=Be("assistant-chat");return ae(),ue(It,{view:"hHh lpR fFf"},{default:K(()=>[Z(Et,null,{default:K(()=>[Z(i)]),_:1}),Z(p),Z(Ht,{elevated:"",className:"bg-grey-8 text-white text-center"},{default:K(()=>[Z(Lt,null,{default:K(()=>[Z(zt,null,{default:K(()=>[oe("div",null,[oe("span",An,ce(e.$t("layout.title")),1),oe("span",Fn,"\xA9 2009 - "+ce(l.year),1)])]),_:1})]),_:1})]),_:1})]),_:1})}var On=nt(Tn,[["render",Bn]]);export{On as default};
